#!/bin/bash


function build_shared()
{


   BASEDIR=$HOME/build_shared
   PREFIX=$BASEDIR/shared

   export MACOSX_DEPLOYMENT_TARGET=10.9
   #export LD_RUNPATH_SEARCH_PATHS=@executable_path
   #export INSTALL_PATH=@executable_path
   export PKG_CONFIG_PATH=$PREFIX/lib/pkgconfig/

   cd $BASEDIR

   echo "Fetching FFmpeg..."
   git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg
   cd ffmpeg
   ./configure --extra-cflags="-I$PREFIX/include" --extra-ldflags="-L$PREFIX/lib" --bindir="$PREFIX/bin" --prefix=$PREFIX --libdir=@executable_path --enable-gpl --enable-nonfree --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libx264 --enable-pic --enable-shared --enable-static
   make -j 8
   make install


}


build_shared



