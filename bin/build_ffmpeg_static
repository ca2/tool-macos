#!/bin/bash


function build_static()
{


   build_x264_static

   build_fdk_aac_static

   build_lame_static

   build_freetype_static

   BASEDIR=$HOME/build_static
   
   PREFIX=$BASEDIR/static

   mkdir -p $PREFIX

   export MACOSX_DEPLOYMENT_TARGET=10.9

   cd $BASEDIR

   echo "Fetching FFmpeg..."
   git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg
   cd ffmpeg
   ./configure --prefix=$PREFIX --extra-cflags="-I$PREFIX/include" --extra-ldflags="-L$PREFIX/lib" --bindir="$PREFIX/bin" --enable-gpl --enable-nonfree --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libx264 --enable-static

   mkdir -p $HOME/solution/basis/archive/storage-macos/library/x86_64/Debug
   mkdir -p $HOME/solution/basis/archive/storage-macos/library/x86_64/Release
   cp $PREFIX/lib/* $HOME/solution/basis/archive/storage-macos/library/x86_64/Debug
   cp $PREFIX/lib/* $HOME/solution/basis/archive/storage-macos/library/x86_64/Release


}


build_static


